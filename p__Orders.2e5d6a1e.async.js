(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{RMs7:function(e,t,r){e.exports={tableList:"antd-pro-pages-orders-orders-tableList",tableListOperator:"antd-pro-pages-orders-orders-tableListOperator",tableListForm:"antd-pro-pages-orders-orders-tableListForm",submitButtons:"antd-pro-pages-orders-orders-submitButtons"}},vrSh:function(e,t,r){"use strict";r.r(t);r("IzEo");var a,n,o,l,s=r("bx4M"),i=(r("Awhp"),r("KrTs")),c=r("p0pE"),d=r.n(c),u=(r("14J3"),r("BMrR")),p=(r("jCWc"),r("kPKH")),h=(r("OaEy"),r("2fM7")),m=(r("Pwec"),r("CtXQ")),f=(r("+L6B"),r("2/Rp")),g=(r("5NDa"),r("5rEg")),y=r("2Taf"),v=r.n(y),E=r("vZ4D"),w=r.n(E),b=r("l4Ni"),k=r.n(b),S=r("ujKo"),_=r.n(S),C=r("MhPg"),R=r.n(C),x=(r("y8nQ"),r("Vl3Y")),I=r("q1tI"),F=r.n(I),L=r("wY1l"),D=r.n(L),M=r("MuoO"),O=r("wd/R"),T=r.n(O),K=r("WG1l"),P=r.n(K),z=r("CkN6"),B=r("zHco"),Y=r("RMs7"),H=r.n(Y),N=r("bcXk"),j=["pengding","paid"],J=["\u5f85\u5904\u7406","\u5df2\u4ed8\u6b3e"];var V=(a=Object(M["connect"])(function(e){var t=e.orders,r=e.loading;return{orders:t.orders,loading:r.effects["orders/fetch"]||r.effects["orders/search"],link:t.link}}),n=x["a"].create(),a(o=n((l=function(e){function t(){var e,r;v()(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return r=k()(this,(e=_()(t)).call.apply(e,[this].concat(n))),r.state={filteredInfo:null,sortedInfo:null,selectedRows:[],params:{simple:!0,current:1,pageSize:4,total:r.props.orders.length},res:[]},r.getColumnSearchProps=function(e){return{filterDropdown:function(t){var a=t.setSelectedKeys,n=t.selectedKeys,o=t.confirm,l=t.clearFilters;return F.a.createElement("div",{style:{padding:8}},F.a.createElement(g["a"],{ref:function(e){r.searchInput=e},placeholder:"Search ".concat(e),value:n[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return r.handleSearch(n,o,e)},style:{width:188,marginBottom:8,display:"block"}}),F.a.createElement(f["a"],{type:"primary",onClick:function(){return r.handleSearch(n,o,e)},icon:"search",size:"small",style:{width:90,marginRight:8}},"\u641c\u7d22"),F.a.createElement(f["a"],{onClick:function(){return r.handleReset(l)},size:"small",style:{width:90}},"\u91cd\u7f6e"))},filterIcon:function(e){return F.a.createElement(m["a"],{type:"search",style:{color:e?"#1890ff":void 0}})},onFilter:function(t,r){return r[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout(function(){return r.searchInput.select()})},render:function(t){return r.state.searchedColumn===e?F.a.createElement(P.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[r.state.searchText],autoEscape:!0,textToHighlight:t.toString()}):t}}},r.handleSearch=function(e,t,a){t(),r.setState({searchText:e[0],searchedColumn:a})},r.handleReset=function(e){e(),r.setState({searchText:""})},r.handleSearchTwo=function(e){e.preventDefault();var t=r.props,a=t.dispatch,n=t.form;n.validateFields(function(e,t){console.log(t.financial_status),a({type:"orders/search",payload:{name:t.name,type:t.type,vendor:t.vendor,financial_status:t.status,namelike:t.namelike}})})},r.handleFormReset=function(){var e=r.props,t=e.form,a=e.dispatch;t.resetFields(),a({type:"orders/fetch",payload:{}})},r.handleChange=function(e,t,a,n){console.log("Various parameters",e,t,a),r.setState({filteredInfo:t,sortedInfo:a,params:{currentPage:n,pageSize:4,simple:!0,total:r.props.orders.length}})},r.handleSelectRows=function(e){r.setState({selectedRows:e})},r.handlechange=function(e){var t=r.props.dispatch;t({type:"orders/changepage",payload:{link:e}})},r}return R()(t,e),w()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"orders/fetch"}),t({type:"orders/allpro",callback:function(t){e.setState({res:t.data.orders})}})}},{key:"handleDel",value:function(){var e=this,t=this.props.dispatch,r=this.state.selectedRows;0!==r.length&&t({type:"orders/remove",payload:{id:r.map(function(e){return e.id})},callback:function(){console.log(r),e.setState({selectedRows:[]})}})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,t=[F.a.createElement(Option,{value:"pending"},"\u5f85\u5904\u7406"),F.a.createElement(Option,{value:"paid"},"\u5df2\u4ed8\u6b3e")];return F.a.createElement(x["a"],{onSubmit:this.handleSearchTwo,layout:"inline"},F.a.createElement(u["a"],{gutter:{md:8,lg:24,xl:48}},F.a.createElement(p["a"],{md:6,sm:8},F.a.createElement(x["a"].Item,{label:"\u4ed8\u6b3e\u72b6\u6001"},e("status")(F.a.createElement(h["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"120px"}},t)))),F.a.createElement(p["a"],{md:4,sm:8},F.a.createElement("span",{className:H.a.submitButtons},F.a.createElement(f["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),F.a.createElement(f["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this,t=this.state,r=t.sortedInfo,a=t.filteredInfo;r=r||{},a=a||{};var n=[{title:"\u8ba2\u5355\u53f7",dataIndex:"order_number",key:"order_number",sorter:function(e,t){return e.order_number-t.order_number},sortOrder:"order_number"===r.columnKey&&r.order,ellipsis:!0},d()({title:"\u65e5\u671f",dataIndex:"created_at",key:"created_at",sorter:function(e,t){return e.created_at-t.created_at},sortOrder:"created_at"===r.columnKey&&r.order,render:function(e){return F.a.createElement("span",null,T()(e).format("YYYY-MM-DD HH:mm:ss"))}},this.getColumnSearchProps("created_at")),{title:"\u5ba2\u6237",render:function(e,t){return t.customer.first_name+t.customer.last_name}},{title:"\u4ed8\u6b3e\u72b6\u6001",dataIndex:"financial_status",filters:[{text:J[0],value:0},{text:J[1],value:1}],render:function(e,t){switch(t.financial_status){case"pending":return J[0];case"paid":return J[1];default:break}return F.a.createElement(i["a"],{status:j[e],text:J[e]})}},d()({title:"\u603b\u8ba1",dataIndex:"total_price",render:function(e,t){var r=0;return r="$"+t.total_price,r},key:"total_price",sorter:function(e,t){return e.total_price-t.total_price},sortOrder:"total_price"===r.columnKey&&r.order},this.getColumnSearchProps("total_price"))],o=this.props,l=o.orders,c=o.loading,u=o.link,p=this.state.selectedRows,h=this.state.params;console.log(this.props.orders),console.log("-----------");var m={list:l,pagination:h};return F.a.createElement("div",null,F.a.createElement(B["a"],{title:"\u8ba2\u5355"},F.a.createElement("br",null),F.a.createElement(s["a"],null,F.a.createElement("div",null,this.renderSimpleForm()),F.a.createElement(D.a,{to:"/orders/addorder"},F.a.createElement(f["a"],{icon:"plus",type:"primary"},"\u65b0\u5efa")),p.length>0&&F.a.createElement("span",null,F.a.createElement(f["a"],{onClick:function(){return e.handleDel()},style:{marginLeft:"10px"}},"\u5220\u9664")),F.a.createElement(z["a"],{selectedRows:p,loading:c,data:m,columns:n,onSelectRow:this.handleSelectRows,onChange:this.handleChange,rowKey:"id",pagination:!1}),F.a.createElement(N["a"],{handlechange:this.handlechange,Link:u}))))}}]),t}(I["Component"]),o=l))||o)||o);t["default"]=V}}]);