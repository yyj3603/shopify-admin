(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{ETNY:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,l,i,c=a("bx4M"),s=(a("14J3"),a("BMrR")),o=(a("+L6B"),a("2/Rp")),d=(a("OaEy"),a("2fM7")),p=(a("jCWc"),a("kPKH")),u=(a("5NDa"),a("5rEg")),m=a("2Taf"),h=a.n(m),v=a("vZ4D"),y=a.n(v),f=a("l4Ni"),E=a.n(f),k=a("ujKo"),g=a.n(k),b=a("MhPg"),w=a.n(b),O=(a("y8nQ"),a("Vl3Y")),x=a("q1tI"),_=a.n(x),I=a("MuoO"),R=a("wY1l"),S=a.n(R),L=(a("dCQc"),a("CkN6")),F=a("zHco"),D=(a("WG1l"),a("IDqu")),q=a.n(D),N=a("bcXk");function C(e){var t=[];if(e instanceof Array){for(var a=e.map(function(e){return e.vendor}),n=(t=[],0);n<a.length;n++)-1==t.indexOf(a[n])&&t.push(a[n]);return t}return t}function M(e){var t=[];if(e instanceof Array){for(var a=e.map(function(e){return e.product_type}),n=(t=[],0);n<a.length;n++)-1==t.indexOf(a[n])&&t.push(a[n]);return t}return t}var B=(n=Object(I["connect"])(function(e){var t=e.products,a=e.loading;e.link;return{products:t.products,link:t.link,loading:a.effects["products/fetch"]||a.effects["products/add"]||a.effects["products/remove"]||a.effects["products/changepage"]||a.effects["products/search"]}}),r=O["a"].create(),n(l=r((i=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=E()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],params:{simple:!0,current:1,pageSize:10,total:a.props.products.length},expandForm:!1,res:[]},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handlechange=function(e){var t=a.props.dispatch;t({type:"products/changepage",payload:{link:e}})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form;r.validateFields(function(e,t){n({type:"products/search",payload:{name:t.name,type:t.type,vendor:t.vendor,namelike:t.namelike,sort:t.sort,limit:t.limit}})})},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),n({type:"products/fetch",payload:{}})},a}return w()(t,e),y()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"products/fetch"}),t({type:"products/allpro",callback:function(t){e.setState({res:t.data.products})}})}},{key:"handleDel",value:function(){var e=this,t=this.props.dispatch,a=this.state.selectedRows;0!==a.length&&t({type:"products/remove",payload:{id:a.map(function(e){return e.id})},callback:function(){e.setState({selectedRows:[]})}})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,t=C(this.state.res).map(function(e){return _.a.createElement(Option,{value:e,key:e},e)}),a=M(this.state.res).map(function(e){return _.a.createElement(Option,{value:e,key:e},e)});return _.a.createElement(O["a"],{onSubmit:this.handleSearch,layout:"inline"},_.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},_.a.createElement(p["a"],{md:8,sm:10},_.a.createElement(O["a"].Item,{label:"\u5546\u54c1\u540d\u79f0"},e("name")(_.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),_.a.createElement(p["a"],{md:8,sm:10},_.a.createElement(O["a"].Item,{label:"\u5546\u54c1\u7c7b\u578b"},e("type")(_.a.createElement(d["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"120px"}},a)))),_.a.createElement(p["a"],{md:8,sm:10},_.a.createElement(O["a"].Item,{label:"\u4f9b\u5e94\u5546"},e("vendor")(_.a.createElement(d["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"120px"}},t)))),_.a.createElement(p["a"],{md:8,sm:10},_.a.createElement(O["a"].Item,{label:"\u6392\u5e8f"},e("sort",{initialValue:"updated_at+desc"})(_.a.createElement(d["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"150px"}},_.a.createElement(d["a"].Option,{value:"updated_at+desc",key:"updated_at+desc"},"\u66f4\u65b0\u65f6\u95f4\u964d\u5e8f"),_.a.createElement(d["a"].Option,{value:"updated_at+asc",key:"updated_at+asc"},"\u66f4\u65b0\u65f6\u95f4\u5347\u5e8f"),_.a.createElement(d["a"].Option,{value:"created_at+desc",key:"created_at+desc"},"\u521b\u5efa\u65f6\u95f4\u964d\u5e8f"),_.a.createElement(d["a"].Option,{value:"created_at+asc",key:"created_at+asc"},"\u521b\u5efa\u65f6\u95f4\u5347\u5e8f"),_.a.createElement(d["a"].Option,{value:"title+desc",key:"title+desc"},"\u5546\u54c1\u540d\u79f0\u964d\u5e8f"),_.a.createElement(d["a"].Option,{value:"title+asc",key:"title+asc"},"\u5546\u54c1\u540d\u79f0\u5347\u5e8f"))))),_.a.createElement(p["a"],{md:8,sm:10},_.a.createElement(O["a"].Item,{label:"\u6392\u5e8f"},e("limit",{initialValue:10})(_.a.createElement(d["a"],{initialValue:"10",style:{width:"150px"}},_.a.createElement(d["a"].Option,{value:"10",key:"10"},"10"),_.a.createElement(d["a"].Option,{value:"8",key:"8"},"8"),_.a.createElement(d["a"].Option,{value:"5",key:"5"},"5"))))),_.a.createElement(p["a"],{md:4,sm:8},_.a.createElement("span",{className:q.a.submitButtons},_.a.createElement(o["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),_.a.createElement(o["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this,t=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"title",key:"title",width:"70%"},{title:"\u5e93\u5b58",dataIndex:"variants[0].inventory_quantity",key:"inventory",width:"10%",sorter:function(e,t){return e.variants[0].inventory_quantity-t.variants[0].inventory_quantity},render:function(e,t){for(var a=0,n=0;n<t.variants.length;n++)a+=t.variants[n].inventory_quantity;return a}},{title:"\u4ef7\u683c",dataIndex:"variants[0].price",key:"price",width:"10%",sorter:function(e,t){return e.variants[0].price-t.variants[0].price},render:function(e,t){var a=0;return a="$".concat(t.variants[0].price),a}},{title:"\u4f9b\u5e94\u5546",dataIndex:"vendor",width:"10%",key:"vendor"}],a=this.props.loading,n=this.props,r=n.products,l=n.link,i=this.state.params,s=this.state.selectedRows,d={list:r,pagination:i};return _.a.createElement(F["a"],{title:"\u5546\u54c1\u5217\u8868"},_.a.createElement(c["a"],null,_.a.createElement("div",{className:q.a.tableList},_.a.createElement("div",null,this.renderSimpleForm()),_.a.createElement("div",{className:q.a.tableListOperator},_.a.createElement(S.a,{to:"/products/addproduct"},_.a.createElement(o["a"],{icon:"plus",type:"primary"},"\u65b0\u5efa")),s.length>0&&_.a.createElement("span",null,_.a.createElement(o["a"],{onClick:function(){return e.handleDel()}},"\u5220\u9664"))),_.a.createElement(L["a"],{selectedRows:s,loading:a,data:d,columns:t,onSelectRow:this.handleSelectRows,rowKey:"id",pagination:!1})),_.a.createElement(N["a"],{handlechange:this.handlechange,Link:l})))}}]),t}(x["Component"]),l=i))||l)||l);t["default"]=B},IDqu:function(e,t,a){e.exports={tableList:"antd-pro-pages-products-table-list-tableList",tableListOperator:"antd-pro-pages-products-table-list-tableListOperator",tableListForm:"antd-pro-pages-products-table-list-tableListForm",submitButtons:"antd-pro-pages-products-table-list-submitButtons"}}}]);