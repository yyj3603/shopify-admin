(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"5ESp":function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),o=(a("g9YV"),a("wCAj")),r=(a("+L6B"),a("2/Rp")),l=(a("5NDa"),a("5rEg")),s=(a("cIOH"),a("Q9mQ"),a("q1tI")),i=a.n(s),c=a("VCL8"),u=a("3S7+"),p=a("CtXQ"),d=a("YMnH"),m=a("ZvpZ"),f=a("H84U");function v(e){return v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},y.apply(this,arguments)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,a){return t&&g(e.prototype,t),a&&g(e,a),e}function b(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?x(e):t}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}var O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},k=function(e){function t(e){var a;return h(this,t),a=b(this,w(t).call(this,e)),a.onConfirm=function(e){a.setVisible(!1,e);var t=a.props.onConfirm;t&&t.call(x(a),e)},a.onCancel=function(e){a.setVisible(!1,e);var t=a.props.onCancel;t&&t.call(x(a),e)},a.onVisibleChange=function(e){var t=a.props.disabled;t||a.setVisible(e)},a.saveTooltip=function(e){a.tooltip=e},a.renderOverlay=function(e,t){var n=a.props,o=n.okButtonProps,l=n.cancelButtonProps,i=n.title,c=n.cancelText,u=n.okText,p=n.okType,d=n.icon;return s["createElement"]("div",null,s["createElement"]("div",{className:"".concat(e,"-inner-content")},s["createElement"]("div",{className:"".concat(e,"-message")},d,s["createElement"]("div",{className:"".concat(e,"-message-title")},i)),s["createElement"]("div",{className:"".concat(e,"-buttons")},s["createElement"](r["a"],y({onClick:a.onCancel,size:"small"},l),c||t.cancelText),s["createElement"](r["a"],y({onClick:a.onConfirm,type:p,size:"small"},o),u||t.okText))))},a.renderConfirm=function(e){var t=e.getPrefixCls,n=a.props,o=n.prefixCls,r=n.placement,l=O(n,["prefixCls","placement"]),i=t("popover",o),c=s["createElement"](d["a"],{componentName:"Popconfirm",defaultLocale:m["a"].Popconfirm},function(e){return a.renderOverlay(i,e)});return s["createElement"](u["a"],y({},l,{prefixCls:i,placement:r,onVisibleChange:a.onVisibleChange,visible:a.state.visible,overlay:c,ref:a.saveTooltip}))},a.state={visible:e.visible},a}return C(t,e),E(t,[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"setVisible",value:function(e,t){var a=this.props;"visible"in a||this.setState({visible:e});var n=a.onVisibleChange;n&&n(e,t)}},{key:"render",value:function(){return s["createElement"](f["a"],null,this.renderConfirm)}}],[{key:"getDerivedStateFromProps",value:function(e){return"visible"in e?{visible:e.visible}:"defaultVisible"in e?{visible:e.defaultVisible}:null}}]),t}(s["Component"]);k.defaultProps={transitionName:"zoom-big",placement:"top",trigger:"click",okType:"primary",icon:s["createElement"](p["a"],{type:"exclamation-circle",theme:"filled"}),disabled:!1},Object(c["polyfill"])(k);var _,P,V,j=k,N=(a("/zsF"),a("PArb")),T=(a("+BJd"),a("mr32")),R=a("2Taf"),A=a.n(R),M=a("vZ4D"),I=a.n(M),D=a("l4Ni"),z=a.n(D),K=a("ujKo"),B=a.n(K),Q=a("MhPg"),Z=a.n(Q),H=(a("OaEy"),a("2fM7")),Y=(a("y8nQ"),a("Vl3Y")),J=a("MuoO"),L=(a("CkN6"),a("zHco")),F=a("QMmz"),U=a("wY1l"),q=a.n(U),W=(a("dCQc"),a("vwV5")),X=a.n(W),G=(Y["a"].Item,H["a"].Option),$=(_=Object(J["connect"])(function(e){var t=e.customers,a=e.loading;return{customers:t.customers,avaicustomers:t.availindexdata,loading:a.effects["customers/fetch"]}}),_((V=function(e){function t(){var e,a;A()(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return a=z()(this,(e=B()(t)).call.apply(e,[this].concat(o))),a.state={selectedRowKeys:[],selectedRows:[],filtervalue:0,searchinput:"",filtercustomers:[],sortvalue:0},a.onSelectChange=function(e,t){a.setState({selectedRowKeys:e}),console.log("selectedRowKeys: ",e),a.setState({selectedRows:t}),console.log("selectedRows: ",t)},a.handleSearch=function(e){if(a.setState({searchinput:e}),console.log("opt:",a.state.filtervalue,e),""==e||null==e){var t=a.props.dispatch;t({type:"customers/getavailindexdata",aipayload:a.props.customers})}else if(0==a.state.filtervalue){for(var n=a.props.customers,o=[],r=0;r<n.length;r++)n[r].first_name!=e&&n[r].first_name+n[r].last_name!=e&&n[r].orders_count!=e&&n[r].total_spent!=e||o.push(n[r]);console.log("temp1",o),a.state.filtercustomers=o;var l=a.props.dispatch;l({type:"customers/getavailindexdata",aipayload:o})}else if(1==a.state.filtervalue){for(n=a.props.customers,o=[],r=0;r<n.length;r++)n[r].total_spent==e&&o.push(n[r]);console.log("temp1",o),a.state.filtercustomers=o;var s=a.props.dispatch;s({type:"customers/getavailindexdata",aipayload:o})}if(2==a.state.filtervalue){for(n=a.props.customers,o=[],r=0;r<n.length;r++)n[r].orders_count==e&&o.push(n[r]);console.log("temp1",o),a.state.filtercustomers=o;var i=a.props.dispatch;i({type:"customers/getavailindexdata",aipayload:o})}},a.handleChangeselect=function(e){console.log(e),a.setState({filtervalue:e})},a.handleChangeSort=function(e){if(console.log(e),a.setState({sortvalue:e}),0==e){var t=[];t=a.props.avaicustomers,t.sort(function(e,t){return e.updated_at<t.updated_at?1:-1}),console.log("byupdate",t);var n=a.props.dispatch;n({type:"customers/getavailindexdata",aipayload:t})}else if(1==e){t=[];t=a.props.avaicustomers,t.sort(function(e,t){return e.updated_at<t.updated_at?1:-1});for(var o=[],r=t.length-1;r>=0;r--)o.push(t[r]);var l=a.props.dispatch;l({type:"customers/getavailindexdata",aipayload:o})}else if(2==e){var s=[];s=a.props.avaicustomers,s.sort(function(e,t){return e.total_spent-t.total_spent}),console.log("sort:",s);var i=[];for(r=s.length-1;r>=0;r--)i.push(s[r]);var c=a.props.dispatch;c({type:"customers/getavailindexdata",aipayload:i})}else if(3==e){var u=[];u=a.props.avaicustomers,u.sort(function(e,t){return e.orders_count-t.orders_count}),console.log("sort:",u);var p=[];for(r=u.length-1;r>=0;r--)p.push(u[r]);var d=a.props.dispatch;d({type:"customers/getavailindexdata",aipayload:p})}},a.columns=[{title:a.props.customers.length+":customers",render:function(e,t){return t.first_name+" "+t.last_name}},{title:"\u57ce\u5e02\u548c\u56fd\u5bb6",render:function(e,t){return t.addresses.map(function(e){return e.city})+" "+t.addresses.map(function(e){return e.country_code})}},{title:"\u90ae\u7bb1",dataIndex:"email",key:"email"},{title:"\u8ba2\u5355\u6570",dataIndex:"orders_count",key:"orders_count"},{title:"\u82b1\u8d39",dataIndex:"total_spent",key:"total_spent"},{title:"Tags",key:"tags",dataIndex:"tags",render:function(e){return i.a.createElement("span",{style:{display:""==e?"none":"block"}},e.split(",").map(function(e){var t=e.length>9?"red":"green";return e.length>=6&&e.length<=8&&(t="volcano"),e.length>4&&e.length<6&&(t="geekblue"),e.length<=4&&(t="green"),i.a.createElement(T["a"],{color:t,key:e},e.toUpperCase())}))}},{title:"Action",key:"action",render:function(e,t){var n=t.id,o=t.orders_count;return i.a.createElement("span",null,i.a.createElement(q.a,{to:"/customers/editcustomers"},i.a.createElement("a",{onClick:function(){return a.handleEdit(t)}},"\u7f16\u8f91")),i.a.createElement(N["a"],{type:"vertical"}),i.a.createElement(j,{title:"\u786e\u5b9a\u8981\u5220\u9664\u6b64\u9879?",onConfirm:function(){return a.handleDelOne(n,o)}},i.a.createElement("a",null,"\u5220\u9664")))}}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a}return Z()(t,e),I()(t,[{key:"handleEdit",value:function(e){var t=this.props.dispatch;console.log(e),t({type:"customers/getedit",apayload:[e]})}},{key:"handleEditAll",value:function(e){var t=this.props.dispatch;t({type:"customers/getedit",apayload:e})}},{key:"handleDelOne",value:function(e,t){var a=this,n=this.props.dispatch;console.log(e),0==t?(n({type:"customers/remove",payload:{id:e},callback:function(){a.setState({selectedRowKeys:[]})}}),alert("\u5df2\u6210\u529f\u5220\u9664\u6b64\u7528\u6237\uff01\uff01\uff01")):alert("\u4e0d\u80fd\u5220\u9664\u8ba2\u5355\u6570\u5927\u4e8e0\u7684\u5ba2\u6237\uff01\uff01\uff01")}},{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"customers/fetch"}),e({type:"customers/getavail"})}},{key:"render",value:function(){var e=this,t=this.props.avaicustomers,a=this.columns,s=this.state.selectedRowKeys,c={selectedRowKeys:s,onChange:this.onSelectChange},u=l["a"].Search;return i.a.createElement("div",null,console.log("\u987e\u5ba2\uff1a----------------",this.props.customers),console.log("\u8d5b\u9009\u987e\u5ba2\uff1a----------------",this.props.avaicustomers),i.a.createElement(L["a"],{title:"\u5ba2\u6237"},i.a.createElement(n["a"],null,i.a.createElement("div",{className:"card_customer_head",style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",borderBottom:"solid 1px  \t#EAEAEA"}},i.a.createElement("div",{style:{width:"32px",height:"35px",borderBottom:"solid 4px #0000ff"}},"\u6240\u6709"),i.a.createElement(q.a,{to:"/customers/addcustomers"},i.a.createElement(r["a"],{icon:"plus",type:"primary"},"\u6dfb\u52a0\u5ba2\u6237"))),i.a.createElement("br",null),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement(H["a"],{onChange:function(t){return e.handleChangeselect(t)},id:"search",defaultValue:"0",style:{width:"150px"}},i.a.createElement(G,{value:"0"},"Select a filter"),i.a.createElement(G,{value:"1"},"Money spent"),i.a.createElement(G,{value:"2"},"Number of orders")),i.a.createElement("div",{className:X.a.container},i.a.createElement("div",{id:"components-input-demo-search-input"},i.a.createElement("div",null,i.a.createElement(u,{placeholder:"input search text",onSearch:function(t){return e.handleSearch(t)},style:{width:750}})))),i.a.createElement("div",{style:{width:"150px",textAlign:"center"}},"Sort by"),i.a.createElement(H["a"],{onChange:function(t){return e.handleChangeSort(t)},defaultValue:"0",style:{width:"150px"}},i.a.createElement(G,{value:"0"},"Newest update"),i.a.createElement(G,{value:"1"},"Oldest update"),i.a.createElement(G,{value:"2"},"Most spent"),i.a.createElement(G,{value:"3"},"Most orders"))),i.a.createElement("div",{style:{marginTop:"25px"}},i.a.createElement(q.a,{to:"/customers/editcustomers"},i.a.createElement(r["a"],{icon:"plus",type:"primary",onClick:this.handleEditAll(this.state.selectedRows)},"\u7f16\u8f91\u9009\u4e2d\u5ba2\u6237\u5ba2\u6237"))),i.a.createElement("div",{style:{marginTop:"25px"}},i.a.createElement(o["a"],{rowSelection:c,columns:a,dataSource:t,scroll:{y:500}}),";",i.a.createElement(F["a"],null),i.a.createElement("div",{style:{width:"150px",textAlign:"center"}},"Sort by"),i.a.createElement(H["a"],{defaultValue:"0",style:{width:"150px"}},i.a.createElement(G,{value:"0"},"Newest update"),i.a.createElement(G,{value:"1"},"Oldest update"),i.a.createElement(G,{value:"2"},"Most spent"),i.a.createElement(G,{value:"3"},"Most orders"),i.a.createElement(G,{value:"4"},"Customer A-Z"),i.a.createElement(G,{value:"5"},"Customer Z-A"))),i.a.createElement("div",{style:{marginTop:"25px"}},i.a.createElement(q.a,{to:"/customers/editcustomers"},i.a.createElement(r["a"],{icon:"plus",type:"primary",onClick:this.handleEditAll(this.state.selectedRows)},"\u7f16\u8f91\u9009\u4e2d\u5ba2\u6237\u5ba2\u6237"))),i.a.createElement("div",{style:{marginTop:"25px"}},i.a.createElement(o["a"],{rowSelection:c,columns:a,dataSource:t,pagination:this.state.pagination,scroll:{y:500}}),";")),i.a.createElement("br",null)))}}]),t}(s["Component"]),P=V))||P);t["default"]=$},vwV5:function(e,t,a){}}]);