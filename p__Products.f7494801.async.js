(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{ETNY:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,s,i,l=a("bx4M"),o=(a("14J3"),a("BMrR")),c=(a("+L6B"),a("2/Rp")),p=(a("OaEy"),a("2fM7")),d=(a("jCWc"),a("kPKH")),u=(a("5NDa"),a("5rEg")),m=a("2Taf"),h=a.n(m),f=a("vZ4D"),v=a.n(f),y=a("l4Ni"),E=a.n(y),g=a("ujKo"),b=a.n(g),k=a("MhPg"),w=a.n(k),R=(a("y8nQ"),a("Vl3Y")),x=a("q1tI"),S=a.n(x),I=a("MuoO"),L=a("wY1l"),F=a.n(L),O=(a("dCQc"),a("CkN6")),D=a("zHco"),q=(a("WG1l"),a("IDqu")),N=a.n(q),C=a("bcXk");function M(e){var t=[];if(e instanceof Array){for(var a=e.map(function(e){return e.vendor}),n=(t=[],0);n<a.length;n++)-1==t.indexOf(a[n])&&t.push(a[n]);return t}return t}function B(e){var t=[];if(e instanceof Array){for(var a=e.map(function(e){return e.product_type}),n=(t=[],0);n<a.length;n++)-1==t.indexOf(a[n])&&t.push(a[n]);return t}return t}var _=(n=Object(I["connect"])(function(e){var t=e.products,a=e.loading;e.link;return{products:t.products,link:t.link,loading:a.effects["products/fetch"]||a.effects["products/add"]||a.effects["products/remove"]||a.effects["products/changepage"]||a.effects["products/search"]}}),r=R["a"].create(),n(s=r((i=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return a=E()(this,(e=b()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],params:{simple:!0,current:1,pageSize:10,total:a.props.products.length},expandForm:!1,res:[]},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handlechange=function(e){var t=a.props.dispatch;t({type:"products/changepage",payload:{link:e}})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form;r.validateFields(function(e,t){n({type:"products/search",payload:{name:t.name,type:t.type,vendor:t.vendor,namelike:t.namelike}})})},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),n({type:"products/fetch",payload:{}})},a}return w()(t,e),v()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch;t({type:"products/fetch"}),t({type:"products/allpro",callback:function(t){e.setState({res:t.data.products})}})}},{key:"handleDel",value:function(){var e=this,t=this.props.dispatch,a=this.state.selectedRows;0!==a.length&&t({type:"products/remove",payload:{id:a.map(function(e){return e.id})},callback:function(){e.setState({selectedRows:[]})}})}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,t=M(this.state.res).map(function(e){return S.a.createElement(Option,{value:e},e)}),a=B(this.state.res).map(function(e){return S.a.createElement(Option,{value:e},e)});return S.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline"},S.a.createElement(o["a"],{gutter:{md:8,lg:24,xl:48}},S.a.createElement(d["a"],{md:6,sm:8},S.a.createElement(R["a"].Item,{label:"\u5546\u54c1\u540d\u79f0"},e("name")(S.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),S.a.createElement(d["a"],{md:6,sm:8},S.a.createElement(R["a"].Item,{label:"\u5546\u54c1\u7c7b\u578b"},e("type")(S.a.createElement(p["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"120px"}},a)))),S.a.createElement(d["a"],{md:6,sm:8},S.a.createElement(R["a"].Item,{label:"\u4f9b\u5e94\u5546"},e("vendor")(S.a.createElement(p["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:"120px"}},t)))),S.a.createElement(d["a"],{md:4,sm:8},S.a.createElement("span",{className:N.a.submitButtons},S.a.createElement(c["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),S.a.createElement(c["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this,t=[{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"title",key:"title",width:"70%"},{title:"\u5e93\u5b58",dataIndex:"variants[0].inventory_quantity",key:"inventory",width:"10%",sorter:function(e,t){return e.variants[0].inventory_quantity-t.variants[0].inventory_quantity},render:function(e,t){for(var a=0,n=0;n<t.variants.length;n++)a+=t.variants[n].inventory_quantity;return a}},{title:"\u4ef7\u683c",dataIndex:"variants[0].price",key:"price",width:"10%",sorter:function(e,t){return e.variants[0].price-t.variants[0].price},render:function(e,t){var a=0;return a="$".concat(t.variants[0].price),a}},{title:"\u4f9b\u5e94\u5546",dataIndex:"vendor",width:"10%",key:"vendor"}],a=this.props.loading,n=this.props,r=n.products,s=n.link,i=this.state.params,o=this.state.selectedRows,p={list:r,pagination:i};return S.a.createElement(D["a"],{title:"\u5546\u54c1\u5217\u8868"},S.a.createElement(l["a"],null,S.a.createElement("div",{className:N.a.tableList},S.a.createElement("div",null,this.renderSimpleForm()),S.a.createElement("div",{className:N.a.tableListOperator},S.a.createElement(F.a,{to:"/products/addproduct"},S.a.createElement(c["a"],{icon:"plus",type:"primary"},"\u65b0\u5efa")),o.length>0&&S.a.createElement("span",null,S.a.createElement(c["a"],{onClick:function(){return e.handleDel()}},"\u5220\u9664"))),S.a.createElement(O["a"],{selectedRows:o,loading:a,data:p,columns:t,onSelectRow:this.handleSelectRows,rowKey:"id",pagination:!1})),S.a.createElement(C["a"],{handlechange:this.handlechange,Link:s})))}}]),t}(x["Component"]),s=i))||s)||s);t["default"]=_},IDqu:function(e,t,a){e.exports={tableList:"antd-pro-pages-products-table-list-tableList",tableListOperator:"antd-pro-pages-products-table-list-tableListOperator",tableListForm:"antd-pro-pages-products-table-list-tableListForm",submitButtons:"antd-pro-pages-products-table-list-submitButtons"}}}]);